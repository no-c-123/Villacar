---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
---

<Layout 
  title="Contact Us - Villacar Autos LLC. | Get In Touch"
  description="Contact Villacar Autos LLC. for inquiries, test drives, or to learn more about our vehicle collection. We're here to help you find your dream car."
>
  <Navbar />
  
  <main class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
    <!-- Page Header -->
    <section class="bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 py-24 relative overflow-hidden">
      <div class="absolute inset-0 opacity-20">
        <div class="absolute top-0 right-0 w-96 h-96 bg-red-600 rounded-full filter blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-96 h-96 bg-blue-600 rounded-full filter blur-3xl"></div>
      </div>
      
      <div class="container mx-auto px-4 relative z-10">
        <div class="text-center max-w-3xl mx-auto">
          <h1 class="text-5xl md:text-7xl font-bold text-white mb-6 leading-tight">
            Let's Get <span class="text-red-400">Started</span>
          </h1>
          <p class="text-xl md:text-2xl text-gray-300 leading-relaxed">
            We're here to help you find your perfect vehicle. Reach out today!
          </p>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section class="py-20 -mt-16 relative z-20">
      <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16">
          <!-- Contact Cards -->
          <div class="bg-white rounded-2xl shadow-xl p-8 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
            <div class="w-16 h-16 bg-gradient-to-br from-red-600 to-red-700 rounded-2xl flex items-center justify-center mb-6 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
              </svg>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-3">Call Us</h3>
            <p class="text-gray-600 mb-4">Speak with our team Monday through Saturday</p>
            <a href="tel:9565666618" class="text-red-600 font-bold text-lg hover:text-red-700 transition-colors">
              (956) 566-6618
            </a>
          </div>

          <div class="bg-white rounded-2xl shadow-xl p-8 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
            <div class="w-16 h-16 bg-gradient-to-br from-red-600 to-red-700 rounded-2xl flex items-center justify-center mb-6 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
              </svg>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-3">Visit Us</h3>
            <p class="text-gray-600 mb-4">Stop by our showroom in McAllen</p>
            <address class="text-gray-700 not-italic font-medium">
              4208 S 23rd St<br>
              McAllen, TX 78503
            </address>
          </div>

          <div class="bg-white rounded-2xl shadow-xl p-8 hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
            <div class="w-16 h-16 bg-gradient-to-br from-red-600 to-red-700 rounded-2xl flex items-center justify-center mb-6 shadow-lg">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
              </svg>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-3">Hours</h3>
            <p class="text-gray-600 mb-4">We're open when you need us</p>
            <div class="text-gray-700 font-medium space-y-1">
              <p>Mon-Fri: 9AM - 6PM</p>
              <p>Sat: 10AM - 4PM</p>
              <p>Sun: By Appointment</p>
            </div>
          </div>
        </div>

        <!-- Main Form Section -->
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
          <!-- Contact Form -->
          <div class="lg:col-span-3 bg-white rounded-2xl shadow-2xl p-10">
            <div class="mb-8">
              <h2 class="text-4xl font-bold text-gray-900 mb-3">Send us a Message</h2>
              <p class="text-gray-600 text-lg">Fill out the form below and we'll get back to you within 24 hours.</p>
            </div>
            
            <form id="contactForm" class="space-y-6">
              <!-- Success Message -->
              <div id="successMessage" class="hidden bg-green-50 border-2 border-green-500 rounded-xl p-4 mb-6">
                <div class="flex items-center">
                  <svg class="w-6 h-6 text-green-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <p class="text-green-800 font-semibold">Thank you! Your message has been sent successfully. We'll get back to you within 24 hours.</p>
                </div>
              </div>

              <!-- Error Message -->
              <div id="errorMessage" class="hidden bg-red-50 border-2 border-red-500 rounded-xl p-4 mb-6">
                <div class="flex items-center">
                  <svg class="w-6 h-6 text-red-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                  </svg>
                  <p id="errorText" class="text-red-800 font-semibold"></p>
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label for="firstName" class="block text-sm font-bold text-gray-900 mb-2">First Name *</label>
                  <input 
                    type="text" 
                    id="firstName" 
                    name="firstName"
                    required
                    class="w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all text-gray-900 font-medium"
                    placeholder="John"
                  />
                </div>
                <div>
                  <label for="lastName" class="block text-sm font-bold text-gray-900 mb-2">Last Name *</label>
                  <input 
                    type="text" 
                    id="lastName" 
                    name="lastName"
                    required
                    class="w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all text-gray-900 font-medium"
                    placeholder="Doe"
                  />
                </div>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label for="email" class="block text-sm font-bold text-gray-900 mb-2">Email Address *</label>
                  <input 
                    type="email" 
                    id="email" 
                    name="email"
                    required
                    class="w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all text-gray-900 font-medium"
                    placeholder="john.doe@example.com"
                  />
                </div>
                <div>
                  <label for="phone" class="block text-sm font-bold text-gray-900 mb-2">Phone Number</label>
                  <input 
                    type="tel" 
                    id="phone" 
                    name="phone"
                    class="w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all text-gray-900 font-medium"
                    placeholder="(555) 123-4567"
                  />
                </div>
              </div>

              <div>
                <label for="interest" class="block text-sm font-bold text-gray-900 mb-2">I'm Interested In *</label>
                <select 
                  id="interest" 
                  name="interest"
                  required
                  class="w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all text-gray-900 font-medium appearance-none bg-white"
                >
                  <option value="">Select an option</option>
                  <option value="buying">Buying a Vehicle</option>
                  <option value="selling">Selling My Vehicle</option>
                  <option value="trade-in">Trade-In</option>
                  <option value="test-drive">Schedule Test Drive</option>
                  <option value="financing">Financing Options</option>
                  <option value="other">Other Inquiry</option>
                </select>
              </div>

              <div>
                <label for="message" class="block text-sm font-bold text-gray-900 mb-2">Your Message *</label>
                <textarea 
                  id="message" 
                  name="message"
                  rows="6"
                  required
                  class="w-full px-4 py-4 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all resize-none text-gray-900 font-medium"
                  placeholder="Tell us about your needs and how we can help..."
                ></textarea>
              </div>

              <button 
                type="submit" 
                id="submitButton"
                class="w-full bg-gradient-to-r from-red-600 to-red-700 text-white font-bold text-lg px-8 py-5 rounded-xl hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <span id="buttonText">Send Message</span>
                <svg id="buttonIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                </svg>
                <svg id="loadingIcon" class="hidden w-5 h-5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
              </button>
              
              <p class="text-center text-gray-500 text-sm">
                We typically respond within 24 hours
              </p>
            </form>
          </div>

          <!-- Sidebar -->
          <div class="lg:col-span-2 space-y-8">
            <!-- Why Choose Us -->
            <div class="bg-gradient-to-br from-red-600 to-red-700 rounded-2xl shadow-2xl p-8 text-white">
              <h3 class="text-3xl font-bold mb-6">Why Choose Villacar?</h3>
              <div class="space-y-4">
                <div class="flex items-start">
                  <div class="flex-shrink-0 mt-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                  </div>
                  <div class="ml-4">
                    <h4 class="font-bold text-lg mb-1">24+ Years of Experience</h4>
                    <p class="text-red-100">Trusted by the McAllen community since 2001</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div class="flex-shrink-0 mt-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                  </div>
                  <div class="ml-4">
                    <h4 class="font-bold text-lg mb-1">Quality Inventory</h4>
                    <p class="text-red-100">Every vehicle thoroughly inspected and certified</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div class="flex-shrink-0 mt-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                  </div>
                  <div class="ml-4">
                    <h4 class="font-bold text-lg mb-1">No-Pressure Sales</h4>
                    <p class="text-red-100">We focus on finding the right fit for you</p>
                  </div>
                </div>
                <div class="flex items-start">
                  <div class="flex-shrink-0 mt-1">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                  </div>
                  <div class="ml-4">
                    <h4 class="font-bold text-lg mb-1">Flexible Financing</h4>
                    <p class="text-red-100">Multiple financing options to fit your budget</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Map Placeholder -->
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
              <div class="h-80 bg-gradient-to-br from-gray-800 via-gray-700 to-gray-600 flex items-center justify-center relative overflow-hidden">
                <div class="absolute inset-0 opacity-10">
                  <div class="absolute top-1/2 left-1/2 w-96 h-96 bg-red-600 rounded-full filter blur-3xl transform -translate-x-1/2 -translate-y-1/2"></div>
                </div>
                <div class="text-center text-white relative z-10">
                  <div class="w-20 h-20 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-2xl">
                    <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                  </div>
                  <p class="text-2xl font-bold mb-2">Visit Our Showroom</p>
                  <p class="text-gray-300">4208 S 23rd St, McAllen, TX</p>
                </div>
              </div>
              <div class="p-6 bg-gray-50">
                <a 
                  href="https://maps.google.com/?q=4208+S+23rd+St+McAllen+TX+78503"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="block w-full text-center py-3 bg-gradient-to-r from-red-600 to-red-700 text-white font-bold rounded-xl hover:shadow-xl transition-all duration-300"
                >
                  Get Directions
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- FAQ Section -->
        <div class="mt-20 bg-white rounded-2xl shadow-xl p-10">
          <h2 class="text-4xl font-bold text-gray-900 mb-8 text-center">Frequently Asked Questions</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
              <h3 class="text-xl font-bold text-gray-900 mb-3">Do you accept trade-ins?</h3>
              <p class="text-gray-600 leading-relaxed">Yes! We accept trade-ins on all vehicle purchases. Bring your current vehicle in for a free appraisal.</p>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gray-900 mb-3">What financing options are available?</h3>
              <p class="text-gray-600 leading-relaxed">We work with multiple lenders to offer competitive financing rates. Bad credit or no credit? We can help!</p>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gray-900 mb-3">Can I schedule a test drive?</h3>
              <p class="text-gray-600 leading-relaxed">Absolutely! Contact us to schedule a test drive at your convenience. We're flexible with appointments.</p>
            </div>
            <div>
              <h3 class="text-xl font-bold text-gray-900 mb-3">Do you offer warranties?</h3>
              <p class="text-gray-600 leading-relaxed">Yes, we offer extended warranty options on most vehicles. Ask our team about coverage details.</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

                <div class="flex items-start">
                  <div class="flex-shrink-0">
                    <svg class="w-6 h-6 text-blue-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                    </svg>
                  </div>
                  <div class="ml-4">
                    <p class="text-sm font-medium text-gray-500">Email</p>
                    <a href="mailto:contacto@villacar.com" class="text-gray-900 hover:text-blue-600 transition-colors">contacto@villacar.com</a>
                  </div>
                </div>

                <div class="flex items-start">
                  <div class="flex-shrink-0">
                    <svg class="w-6 h-6 text-blue-600 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                  </div>
                  <div class="ml-4">
                    <p class="text-sm font-medium text-gray-500">Hours</p>
                    <p class="text-gray-900">
                      Mon-Fri: 9:00 AM - 6:00 PM<br/>
                      Saturday: 10:00 AM - 5:00 PM<br/>
                      Sunday: Only with an appointment
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Quick Actions -->
            <div class="bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl shadow-lg p-8 text-white">
              <h3 class="text-2xl font-bold mb-4">Schedule a Test Drive</h3>
              <p class="mb-6">Experience your dream car firsthand. Schedule a test drive today!</p>
              <a 
                href="/inventory" 
                class="inline-block bg-white text-blue-600 font-semibold px-6 py-3 rounded-lg hover:bg-gray-100 transition-colors"
              >
                Browse Inventory
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />

  <script>
    const form = document.getElementById('contactForm') as HTMLFormElement;
    const submitButton = document.getElementById('submitButton') as HTMLButtonElement;
    const buttonText = document.getElementById('buttonText');
    const buttonIcon = document.getElementById('buttonIcon');
    const loadingIcon = document.getElementById('loadingIcon');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');
    const errorText = document.getElementById('errorText');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Hide previous messages
      successMessage?.classList.add('hidden');
      errorMessage?.classList.add('hidden');

      // Disable button and show loading
      if (submitButton) submitButton.disabled = true;
      if (buttonText) buttonText.textContent = 'Sending...';
      buttonIcon?.classList.add('hidden');
      loadingIcon?.classList.remove('hidden');

      // Get form data
      const formData = new FormData(form);
      const data = {
        firstName: formData.get('firstName'),
        lastName: formData.get('lastName'),
        email: formData.get('email'),
        phone: formData.get('phone') || '',
        interest: formData.get('interest'),
        message: formData.get('message')
      };

      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });

        const result = await response.json();

        if (response.ok && result.success) {
          // Show success message
          successMessage?.classList.remove('hidden');
          form.reset();
          
          // Scroll to success message
          successMessage?.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
          // Show error message
          if (errorText) errorText.textContent = result.message || 'Something went wrong. Please try again.';
          errorMessage?.classList.remove('hidden');
          
          // Scroll to error message
          errorMessage?.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      } catch (error) {
        console.error('Form submission error:', error);
        if (errorText) errorText.textContent = 'Unable to send message. Please call us at (956) 566-6618.';
        errorMessage?.classList.remove('hidden');
        errorMessage?.scrollIntoView({ behavior: 'smooth', block: 'center' });
      } finally {
        // Re-enable button and restore original text
        if (submitButton) submitButton.disabled = false;
        if (buttonText) buttonText.textContent = 'Send Message';
        buttonIcon?.classList.remove('hidden');
        loadingIcon?.classList.add('hidden');
      }
    });
  </script>
</Layout>

<script>
  // Form submission handling
  const form = document.querySelector('form');
  form?.addEventListener('submit', (e) => {
    e.preventDefault();
    alert('Thank you for your message! We will get back to you soon.');
    form.reset();
  });
</script>
